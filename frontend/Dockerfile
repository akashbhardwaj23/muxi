FROM node:alpine

WORKDIR /frontend


ARG NEXT_PUBLIC_APIKEY
ENV NEXT_PUBLIC_APIKEY=$NEXT_PUBLIC_APIKEY

ARG NEXT_PUBLIC_DATABASE_URL
ENV NEXT_PUBLIC_DATABASE_URL=$NEXT_PUBLIC_DATABASE_URL

ARG NEXT_PUBLIC_APPID
ENV NEXT_PUBLIC_APPID=$NEXT_PUBLIC_APPID


ARG NEXT_PUBLIC_AUTHDOMAIN
ENV NEXT_PUBLIC_AUTHDOMAIN=$NEXT_PUBLIC_AUTHDOMAIN


ARG NEXT_PUBLIC_MESSAGESENDERID
ENV NEXT_PUBLIC_MESSAGESENDERID=$NEXT_PUBLIC_MESSAGESENDERID


ARG NEXT_PUBLIC_PROJECTID
ENV NEXT_PUBLIC_PROJECTID=$NEXT_PUBLIC_PROJECTID


ARG NEXT_PUBLIC_STORAGEBUCKET
ENV NEXT_PUBLIC_STORAGEBUCKET=$NEXT_PUBLIC_STORAGEBUCKET



COPY ./package*.json .
COPY ./next.config.ts .


RUN npm install

COPY . .


RUN npm run build

CMD ['npm', 'run', 'start']
